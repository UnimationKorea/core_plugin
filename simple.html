<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ê°„ë‹¨í•œ ë ˆìŠ¨ í”Œë ˆì´ì–´</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #1e1e2e;
            color: #cdd6f4;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .header {
            background: #313244;
            padding: 1rem 2rem;
            border-bottom: 1px solid #45475a;
        }
        
        .header h1 {
            color: #cba6f7;
            font-size: 1.5rem;
        }
        
        .container {
            display: flex;
            flex: 1;
            min-height: 0;
        }
        
        .sidebar {
            width: 300px;
            background: #313244;
            padding: 1.5rem;
            border-right: 1px solid #45475a;
        }
        
        .main-content {
            flex: 1;
            padding: 2rem;
            display: flex;
            flex-direction: column;
        }
        
        .activity-area {
            flex: 1;
            background: #313244;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 1rem;
            min-height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
        
        .controls {
            display: flex;
            gap: 1rem;
            justify-content: center;
            padding: 1rem;
            background: #313244;
            border-radius: 12px;
        }
        
        .btn {
            background: #89b4fa;
            color: #1e1e2e;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
        }
        
        .btn:hover {
            background: #74c7ec;
            transform: translateY(-1px);
        }
        
        .btn:disabled {
            background: #6c7086;
            cursor: not-allowed;
            transform: none;
        }
        
        .btn-danger {
            background: #f38ba8;
        }
        
        .btn-danger:hover {
            background: #eba0ac;
        }
        
        .form-group {
            margin-bottom: 1rem;
        }
        
        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #a6adc8;
        }
        
        .form-select {
            width: 100%;
            padding: 0.75rem;
            background: #45475a;
            border: 1px solid #6c7086;
            border-radius: 6px;
            color: #cdd6f4;
            font-size: 0.9rem;
        }
        
        .card {
            background: #45475a;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1rem;
        }
        
        .card-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: #fab387;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            z-index: 1000;
            animation: slideIn 0.3s ease;
        }
        
        .notification.success { background: #a6e3a1; color: #1e1e2e; }
        .notification.error { background: #f38ba8; }
        .notification.info { background: #89b4fa; color: #1e1e2e; }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .video-container {
            width: 100%;
            max-width: 600px;
        }
        
        .video-container video {
            width: 100%;
            max-height: 400px;
            border-radius: 8px;
            background: black;
        }
        
        .quiz-container {
            text-align: center;
            max-width: 500px;
        }
        
        .question {
            font-size: 1.3rem;
            margin-bottom: 2rem;
            color: #cba6f7;
        }
        
        .choices {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            justify-content: center;
            margin-bottom: 1.5rem;
        }
        
        .choice {
            background: #89b4fa;
            color: #1e1e2e;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s;
            border: none;
        }
        
        .choice:hover {
            background: #74c7ec;
            transform: scale(1.05);
        }
        
        .drop-zone {
            background: #45475a;
            border: 2px dashed #6c7086;
            border-radius: 8px;
            padding: 2rem;
            margin: 1rem 0;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }
        
        .drop-zone.drag-over {
            border-color: #89b4fa;
            background: rgba(137, 180, 250, 0.1);
        }
        
        .result {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 8px;
            font-weight: 600;
        }
        
        .result.correct {
            background: rgba(166, 227, 161, 0.2);
            color: #a6e3a1;
        }
        
        .result.incorrect {
            background: rgba(243, 139, 168, 0.2);
            color: #f38ba8;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ“ ê°„ë‹¨í•œ ë ˆìŠ¨ í”Œë ˆì´ì–´</h1>
    </div>
    
    <div class="container">
        <div class="sidebar">
            <div class="card">
                <div class="card-title">ë ˆìŠ¨ ì„ íƒ</div>
                
                <div class="form-group">
                    <label class="form-label">ìƒ˜í”Œ ë ˆìŠ¨</label>
                    <select class="form-select" id="lesson-select">
                        <option value="">-- ë ˆìŠ¨ì„ ì„ íƒí•˜ì„¸ìš” --</option>
                        <option value="english">ê¸°ì´ˆ ì˜ì–´ íšŒí™”</option>
                        <option value="math">ìˆ˜í•™ ê¸°ì´ˆ ì—°ì‚°</option>
                        <option value="science">ê³¼í•™ ì‹¤í—˜</option>
                    </select>
                </div>
                
                <button class="btn" id="load-btn" disabled>ë ˆìŠ¨ ì‹œì‘</button>
            </div>
            
            <div class="card" id="lesson-info" style="display: none;">
                <div class="card-title">í˜„ì¬ ë ˆìŠ¨</div>
                <div id="lesson-title">-</div>
                <div style="font-size: 0.9rem; color: #a6adc8; margin-top: 0.5rem;">
                    <span id="activity-counter">0/0</span> í™œë™
                </div>
            </div>
        </div>
        
        <div class="main-content">
            <div class="activity-area" id="activity-area">
                <div>
                    <h2 style="color: #cba6f7; margin-bottom: 1rem;">ğŸ‘‹ í™˜ì˜í•©ë‹ˆë‹¤!</h2>
                    <p>ì¢Œì¸¡ì—ì„œ ë ˆìŠ¨ì„ ì„ íƒí•˜ì—¬ ì‹œì‘í•˜ì„¸ìš”.</p>
                </div>
            </div>
            
            <div class="controls">
                <button class="btn" id="prev-btn" disabled>â¬…ï¸ ì´ì „</button>
                <button class="btn" id="next-btn" disabled>ë‹¤ìŒ â¡ï¸</button>
                <button class="btn btn-danger" id="restart-btn" disabled>ğŸ”„ ë‹¤ì‹œ ì‹œì‘</button>
            </div>
        </div>
    </div>
    
    <script>
        // ì „ì—­ ìƒíƒœ
        let currentLesson = null;
        let currentActivity = 0;
        let activities = [];
        let results = [];
        
        // ìƒ˜í”Œ ë ˆìŠ¨ ë°ì´í„°
        const sampleLessons = {
            english: {
                title: "ê¸°ì´ˆ ì˜ì–´ íšŒí™”",
                activities: [
                    {
                        type: "video",
                        title: "ì¸ì‚¬ë§ ë°°ìš°ê¸°",
                        content: {
                            src: "https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4",
                            description: "ê¸°ë³¸ ì¸ì‚¬ë§ì„ ë°°ì›Œë³´ì„¸ìš”"
                        }
                    },
                    {
                        type: "quiz",
                        title: "ë‹¨ì–´ ë§ì¶”ê¸°", 
                        content: {
                            question: "ì•Œë§ì€ ì¸ì‚¬ë§ì„ ì„ íƒí•˜ì„¸ìš”: Good ____",
                            choices: ["morning", "night", "bye", "hello"],
                            correct: "morning"
                        }
                    }
                ]
            },
            math: {
                title: "ìˆ˜í•™ ê¸°ì´ˆ ì—°ì‚°",
                activities: [
                    {
                        type: "quiz",
                        title: "ë§ì…ˆ ë¬¸ì œ",
                        content: {
                            question: "2 + 3 = ?",
                            choices: ["4", "5", "6", "7"],
                            correct: "5"
                        }
                    }
                ]
            },
            science: {
                title: "ê³¼í•™ ì‹¤í—˜",
                activities: [
                    {
                        type: "video",
                        title: "ë¬¼ì˜ ìˆœí™˜",
                        content: {
                            src: "https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4",
                            description: "ë¬¼ì˜ ìˆœí™˜ ê³¼ì •ì„ ì•Œì•„ë³´ì„¸ìš”"
                        }
                    }
                ]
            }
        };
        
        // DOM ìš”ì†Œë“¤
        const lessonSelect = document.getElementById('lesson-select');
        const loadBtn = document.getElementById('load-btn');
        const activityArea = document.getElementById('activity-area');
        const lessonInfo = document.getElementById('lesson-info');
        const lessonTitle = document.getElementById('lesson-title');
        const activityCounter = document.getElementById('activity-counter');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const restartBtn = document.getElementById('restart-btn');
        
        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
        lessonSelect.addEventListener('change', function() {
            loadBtn.disabled = !lessonSelect.value;
            console.log('ë ˆìŠ¨ ì„ íƒ:', lessonSelect.value);
        });
        
        loadBtn.addEventListener('click', function() {
            const selectedLesson = lessonSelect.value;
            if (selectedLesson) {
                loadLesson(selectedLesson);
            }
        });
        
        prevBtn.addEventListener('click', function() {
            if (currentActivity > 0) {
                currentActivity--;
                loadActivity(currentActivity);
                updateControls();
            }
        });
        
        nextBtn.addEventListener('click', function() {
            if (currentActivity < activities.length - 1) {
                currentActivity++;
                loadActivity(currentActivity);
                updateControls();
            } else {
                finishLesson();
            }
        });
        
        restartBtn.addEventListener('click', function() {
            if (confirm('ë ˆìŠ¨ì„ ë‹¤ì‹œ ì‹œì‘í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                currentActivity = 0;
                results = [];
                loadActivity(0);
                updateControls();
                showNotification('ë ˆìŠ¨ì„ ë‹¤ì‹œ ì‹œì‘í–ˆìŠµë‹ˆë‹¤.', 'info');
            }
        });
        
        // ë ˆìŠ¨ ë¡œë“œ í•¨ìˆ˜
        function loadLesson(lessonId) {
            console.log('ë ˆìŠ¨ ë¡œë“œ:', lessonId);
            
            const lesson = sampleLessons[lessonId];
            if (!lesson) {
                showNotification('ë ˆìŠ¨ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.', 'error');
                return;
            }
            
            currentLesson = lesson;
            activities = lesson.activities;
            currentActivity = 0;
            results = [];
            
            // UI ì—…ë°ì´íŠ¸
            lessonTitle.textContent = lesson.title;
            lessonInfo.style.display = 'block';
            
            // ì²« ë²ˆì§¸ í™œë™ ë¡œë“œ
            loadActivity(0);
            updateControls();
            
            showNotification('ë ˆìŠ¨ì´ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
            console.log('ë ˆìŠ¨ ë¡œë“œ ì™„ë£Œ:', lesson);
        }
        
        // í™œë™ ë¡œë“œ í•¨ìˆ˜
        function loadActivity(index) {
            console.log('í™œë™ ë¡œë“œ:', index);
            
            if (!activities || index < 0 || index >= activities.length) {
                console.error('ìœ íš¨í•˜ì§€ ì•Šì€ í™œë™ ì¸ë±ìŠ¤:', index);
                return;
            }
            
            const activity = activities[index];
            console.log('í™œë™ ì •ë³´:', activity);
            
            // ì¹´ìš´í„° ì—…ë°ì´íŠ¸
            activityCounter.textContent = `${index + 1}/${activities.length}`;
            
            // í™œë™ íƒ€ì…ì— ë”°ë¼ ë Œë”ë§
            if (activity.type === 'video') {
                renderVideoActivity(activity);
            } else if (activity.type === 'quiz') {
                renderQuizActivity(activity);
            } else {
                console.error('ì§€ì›í•˜ì§€ ì•ŠëŠ” í™œë™ íƒ€ì…:', activity.type);
                activityArea.innerHTML = '<div>ì§€ì›í•˜ì§€ ì•ŠëŠ” í™œë™ íƒ€ì…ì…ë‹ˆë‹¤.</div>';
            }
        }
        
        // ë¹„ë””ì˜¤ í™œë™ ë Œë”ë§
        function renderVideoActivity(activity) {
            console.log('ë¹„ë””ì˜¤ í™œë™ ë Œë”ë§:', activity);
            
            activityArea.innerHTML = `
                <div class="video-container">
                    <h3 style="margin-bottom: 1rem; color: #fab387;">${activity.title}</h3>
                    <video controls>
                        <source src="${activity.content.src}" type="video/mp4">
                        ë¹„ë””ì˜¤ë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ” ë¸Œë¼ìš°ì €ì…ë‹ˆë‹¤.
                    </video>
                    <p style="margin-top: 1rem; color: #a6adc8;">${activity.content.description}</p>
                </div>
            `;
        }
        
        // í€´ì¦ˆ í™œë™ ë Œë”ë§
        function renderQuizActivity(activity) {
            console.log('í€´ì¦ˆ í™œë™ ë Œë”ë§:', activity);
            
            const choicesHtml = activity.content.choices.map(choice => 
                `<button class="choice" onclick="selectAnswer('${choice}')">${choice}</button>`
            ).join('');
            
            activityArea.innerHTML = `
                <div class="quiz-container">
                    <h3 style="margin-bottom: 1rem; color: #fab387;">${activity.title}</h3>
                    <div class="question">${activity.content.question}</div>
                    <div class="choices">${choicesHtml}</div>
                    <div class="drop-zone" id="drop-zone" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)">
                        ì •ë‹µì„ ì—¬ê¸°ì— ë“œë˜ê·¸í•˜ê±°ë‚˜ ìœ„ì˜ ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”
                    </div>
                    <div class="result" id="result" style="display: none;"></div>
                </div>
            `;
            
            // ë“œë˜ê·¸ ê°€ëŠ¥í•˜ê²Œ ë§Œë“¤ê¸°
            const choices = document.querySelectorAll('.choice');
            choices.forEach(choice => {
                choice.draggable = true;
                choice.addEventListener('dragstart', function(e) {
                    e.dataTransfer.setData('text/plain', choice.textContent);
                });
            });
        }
        
        // ë‹µì•ˆ ì„ íƒ ì²˜ë¦¬
        function selectAnswer(answer) {
            console.log('ë‹µì•ˆ ì„ íƒ:', answer);
            checkAnswer(answer);
        }
        
        // ë“œë˜ê·¸ì•¤ë“œë¡­ ì²˜ë¦¬
        function handleDragOver(e) {
            e.preventDefault();
            document.getElementById('drop-zone').classList.add('drag-over');
        }
        
        function handleDragLeave(e) {
            document.getElementById('drop-zone').classList.remove('drag-over');
        }
        
        function handleDrop(e) {
            e.preventDefault();
            const dropZone = document.getElementById('drop-zone');
            dropZone.classList.remove('drag-over');
            
            const answer = e.dataTransfer.getData('text/plain');
            console.log('ë“œë¡­ëœ ë‹µì•ˆ:', answer);
            checkAnswer(answer);
        }
        
        // ë‹µì•ˆ í™•ì¸
        function checkAnswer(selectedAnswer) {
            const activity = activities[currentActivity];
            const correctAnswer = activity.content.correct;
            const isCorrect = selectedAnswer === correctAnswer;
            
            console.log('ë‹µì•ˆ í™•ì¸:', selectedAnswer, 'ì •ë‹µ:', correctAnswer, 'ê²°ê³¼:', isCorrect);
            
            const dropZone = document.getElementById('drop-zone');
            const result = document.getElementById('result');
            
            dropZone.textContent = `ì„ íƒí•œ ë‹µ: ${selectedAnswer}`;
            
            if (isCorrect) {
                dropZone.style.background = 'rgba(166, 227, 161, 0.2)';
                dropZone.style.borderColor = '#a6e3a1';
                result.textContent = 'ğŸ‰ ì •ë‹µì…ë‹ˆë‹¤!';
                result.className = 'result correct';
                showNotification('ì •ë‹µì…ë‹ˆë‹¤!', 'success');
            } else {
                dropZone.style.background = 'rgba(243, 139, 168, 0.2)';
                dropZone.style.borderColor = '#f38ba8';
                result.textContent = 'âŒ í‹€ë ¸ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ë³´ì„¸ìš”.';
                result.className = 'result incorrect';
                showNotification('í‹€ë ¸ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ë³´ì„¸ìš”.', 'error');
            }
            
            result.style.display = 'block';
            
            // ê²°ê³¼ ì €ì¥
            results[currentActivity] = {
                selected: selectedAnswer,
                correct: correctAnswer,
                isCorrect: isCorrect
            };
        }
        
        // ì»¨íŠ¸ë¡¤ ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
        function updateControls() {
            prevBtn.disabled = currentActivity <= 0;
            nextBtn.disabled = !currentLesson;
            restartBtn.disabled = !currentLesson;
        }
        
        // ë ˆìŠ¨ ì™„ë£Œ
        function finishLesson() {
            const correctCount = results.filter(r => r && r.isCorrect).length;
            const totalCount = results.filter(r => r).length;
            const percentage = totalCount > 0 ? Math.round((correctCount / totalCount) * 100) : 0;
            
            setTimeout(() => {
                alert(`ğŸ‰ ë ˆìŠ¨ ì™„ë£Œ!
                
ğŸ“Š ê²°ê³¼:
ì •ë‹µë¥ : ${percentage}% (${correctCount}/${totalCount})

ìˆ˜ê³ í•˜ì…¨ìŠµë‹ˆë‹¤! ğŸ‘`);
            }, 100);
        }
        
        // ì•Œë¦¼ í‘œì‹œ
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.remove();
                }
            }, 3000);
        }
        
        // ì´ˆê¸°í™”
        console.log('ğŸš€ ê°„ë‹¨í•œ ë ˆìŠ¨ í”Œë ˆì´ì–´ê°€ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤!');
        updateControls();
    </script>
</body>
</html>